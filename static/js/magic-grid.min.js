!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.MagicGrid=e():t.MagicGrid=e()}(self,(function(){return(()=>{"use strict";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};function n(t){return Array.from(t).filter((t=>t instanceof Element))}t.d(e,{default:()=>r});const i=function(t){const e=t[0];for(let n of t)n.height<e.height&&(e=n);return e};class r{constructor(t){if(!t.container)throw new Error("container missing");this.container=t.container instanceof Element?t.container:document.querySelector(t.container),this.items=n(this.container.children),this.static=!0===t.static,this.size=t.items,this.gutter=t.gutter||25,this.maxColumns=t.maxColumns||!1,this.useMin=t.useMin||!1,this.useTransform=!1!==t.useTransform,this.animate=!1!==t.animate,this.started=!1,this.init()}init(){!this.ready()||this.started||(this.container.style.position="relative",Array.prototype.forEach.call(this.items,(t=>{t.style.position="absolute",this.animate&&(t.style.transition=`${this.useTransform?"transform":"top, left"} 0.2s ease`)})),this.started=!0)}colWidth(){return this.items[0].getBoundingClientRect().width+this.gutter}setup(){const t=this.container.getBoundingClientRect().width,e=this.colWidth(),n=Math.floor(t/e)||1,i=[];this.maxColumns&&n>this.maxColumns&&(n=this.maxColumns);for(let t=0;t<n;t++)i[t]={height:0,index:t};return{cols:i,wSpace:t-n*e+this.gutter}}nextCol(t,e){return this.useMin?i(t):t[e%t.length]}positionItems(){const t=this.setup(),e=t.cols,n=t.wSpace,i=this.colWidth(),r=n?Math.floor(n/2):0;this.items.forEach(((t,n)=>{const o=this.nextCol(e,n),s=o.height?"px":"",a=o.index*i+r+"px",h=o.height+this.gutter+"px";this.useTransform?t.style.transform=`translate(${a}, ${h})`:(t.style.top=h,t.style.left=a),o.height+=t.getBoundingClientRect().height+this.gutter})),this.container.style.height=i(e).height+"px"}ready(){return!!this.static||this.items.length>=this.size}getReady(){let t=this,e=setInterval((()=>{t.container=document.querySelector(t.containerClass),t.items=n(t.container.children),t.ready()&&(clearInterval(e),t.init(),t.listen())}),100)}listen(){this.ready()?(!function(t,e){let n;window.addEventListener("resize",(()=>{n||(n=setTimeout((()=>{t(),n=null}),200))}))}((()=>this.positionItems())),this.positionItems()):this.getReady()}}return e.default}));